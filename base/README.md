# 基础工具类 
 
## noncoptable 

原理：如果基类中的默认构造函数、拷贝构造函数、拷贝赋值运算符或析构函数是**被删除的函数**或者**不可访问**，则派生类中对应的成员将是被删除的，原因是编译器不能使用基类成员来执行派生类对象基类部分的构造、赋值或销毁操作 

代码中第一种是将基类的拷贝构造函数、拷贝赋值运算符是**被删除的函数** 
boost库中的是将拷贝构造函数、拷贝赋值运算符修饰成**不可访问** 

## Mutex 

封装底层原语时，尽量只使用非递归的互斥器和条件变量，慎用读写锁，不要用信号量 

将Mutex用RAII手法封装，这样可以避免用户加锁后未解锁就释放掉当前作用域而导致死锁，即MutexLockGuard类 

## Condition 

封装条件变量的基本用法 

利用timespec结构体来保存时间 

clock_gettime将当前系统时间放入timespec变量中 

加上需要等待的时间，放入pthread_cond_timedwait即可 

## CurrentThread 

与当前线程相关的一些变量和函数

*   __thread
    1.  __thread是GCC内置的线程局部存储设施
    2.  只能修饰POD类型(类似整型指针的标量，不带自定义的构造、拷贝、赋值、析构的类型，二进制内容可以任意复制memset,memcpy,且内容可以复原).
    3. 不能修饰class类型，因为无法自动调用构造函数和析构函数.
    4. 可以用于修饰全局变量，函数内的静态变量，不能修饰函数的局部变量或者class的普通成员变量，且__thread变量值只能初始化为编译器常量.
 
__builtin_expect(long exp, long c)
* 帮助程序员处理分支预测
* 你期望 exp 表达式的值等于常量 c, 看 c 的值, 如果 c 的值为0(即期望的函数返回值), 那么 执行 if 分支的的可能性小, 否则执行 else 分支的可能性小(函数的返回值等于第一个参数 exp).